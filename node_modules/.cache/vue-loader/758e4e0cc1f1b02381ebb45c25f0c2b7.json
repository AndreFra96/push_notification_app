{"remainingRequest":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/src/components/GroupNotificationForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/src/components/GroupNotificationForm.vue","mtime":1624203742220},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEaXNtaXNzYWJsZUFsZXJ0IGZyb20gIi4uL2NvbXBvbmVudHMvRGlzbWlzc2FibGVBbGVydCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkdyb3VzTm90aWZpY2F0aW9uRnJvbSIsCiAgY29tcG9uZW50czogewogICAgRGlzbWlzc2FibGVBbGVydCwKICB9LAogIHByb3BzOiBbImdyb3VwSWQiXSwKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBpZDogdGhpcy5ncm91cElkLAogICAgICB0aXRsZTogIiIsCiAgICAgIGJvZHk6ICIiLAogICAgICBhbGVydDogewogICAgICAgIG1lc3NhZ2U6ICIiLAogICAgICAgIHN0YXR1czogImQtbm9uZSIsCiAgICAgICAgc3VjY2VzczogdHJ1ZSwKICAgICAgfSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBzZW5kTm90aWZpY2F0aW9uKCkgewogICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuJGF1dGguZ2V0VG9rZW5TaWxlbnRseSgpOwogICAgICB0cnkgewogICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgKICAgICAgICAgICJodHRwczovL3B1c2gtYXBpLmhlcm9rdWFwcC5jb20vbWVzc2FnZXMvZ3JvdXAiLAogICAgICAgICAgewogICAgICAgICAgICBncm91cDogdGhpcy5pZCwKICAgICAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsCiAgICAgICAgICAgIGJvZHk6IHRoaXMuYm9keSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0KICAgICAgICApOwoKICAgICAgICB0aGlzLnNob3dSZXNwb25zZUFsZXJ0KAogICAgICAgICAgYE9wZXJhemlvbmUgY29tcGxldGF0YSwgJHsKICAgICAgICAgICAgT2JqZWN0LmtleXMocmVzcG9uc2UuZGF0YS5yZXNwb25zZSkubGVuZ3RoCiAgICAgICAgICB9IG5vdGlmaWNoZSBpbnZpYXRlIGNvbiBzdWNjZXNzby5gCiAgICAgICAgKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRoaXMuc2hvd1Jlc3BvbnNlQWxlcnQoCiAgICAgICAgICBgRXJyb3JlOiBpbCBzZXJ2ZXIgaGEgcmlzcG9zdG8gY29uICcke2UucmVzcG9uc2Uuc3RhdHVzfTogJHtlLnJlc3BvbnNlLnN0YXR1c1RleHR9J2AsCiAgICAgICAgICBmYWxzZQogICAgICAgICk7CiAgICAgIH0KICAgIH0sCiAgICBzaG93UmVzcG9uc2VBbGVydChtZXNzYWdlLCBzdWNjZXNzID0gdHJ1ZSkgewogICAgICB0aGlzLmFsZXJ0Lm1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICB0aGlzLmFsZXJ0LnN0YXR1cyA9ICJkLWJsb2NrIjsKICAgICAgdGhpcy5hbGVydC5zdWNjZXNzID0gc3VjY2VzczsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["GroupNotificationForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GroupNotificationForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <DismissableAlert\n      :message=\"alert.message\"\n      :status=\"alert.status\"\n      :success=\"alert.success\"\n    ></DismissableAlert>\n    <form id=\"GroupNotificationForm\">\n      <div class=\"form-group\">\n        <label for=\"message-title\">Titolo</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          id=\"message-title\"\n          aria-describedby=\"title-hint\"\n          placeholder=\"Titolo della notifica\"\n          v-model=\"title\"\n        />\n        <small id=\"title-hint\" class=\"form-text text-muted\"\n          >E' possibile utilizzare le keywords sia nel titolo che nel corpo\n          della notifica.</small\n        >\n      </div>\n      <div class=\"form-group\">\n        <label for=\"message-body\">Corpo</label>\n        <textarea\n          type=\"text\"\n          class=\"form-control\"\n          id=\"message-body\"\n          placeholder=\"Corpo della notifica\"\n          v-model=\"body\"\n        >\n        </textarea>\n      </div>\n      <button\n        type=\"button\"\n        @click=\"sendNotification\"\n        class=\"btn btn-primary rounded\"\n      >\n        Invia Notifica\n      </button>\n    </form>\n  </div>\n</template>\n<script>\nimport DismissableAlert from \"../components/DismissableAlert\";\n\nexport default {\n  name: \"GrousNotificationFrom\",\n  components: {\n    DismissableAlert,\n  },\n  props: [\"groupId\"],\n  data: function () {\n    return {\n      id: this.groupId,\n      title: \"\",\n      body: \"\",\n      alert: {\n        message: \"\",\n        status: \"d-none\",\n        success: true,\n      },\n    };\n  },\n  methods: {\n    async sendNotification() {\n      const accessToken = await this.$auth.getTokenSilently();\n      try {\n        let response = await this.$http.post(\n          \"https://push-api.herokuapp.com/messages/group\",\n          {\n            group: this.id,\n            title: this.title,\n            body: this.body,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${accessToken}`,\n            },\n          }\n        );\n\n        this.showResponseAlert(\n          `Operazione completata, ${\n            Object.keys(response.data.response).length\n          } notifiche inviate con successo.`\n        );\n      } catch (e) {\n        this.showResponseAlert(\n          `Errore: il server ha risposto con '${e.response.status}: ${e.response.statusText}'`,\n          false\n        );\n      }\n    },\n    showResponseAlert(message, success = true) {\n      this.alert.message = message;\n      this.alert.status = \"d-block\";\n      this.alert.success = success;\n    },\n  },\n};\n</script>\n"]}]}