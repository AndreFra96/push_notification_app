{"remainingRequest":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/thread-loader/dist/cjs.js!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/babel-loader/lib/index.js!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/src/components/TokensList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/src/components/TokensList.vue","mtime":1626256903508},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5zZWFyY2giOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvYW5kcmVhYnJpb3NjaGkvRGVza3RvcC9wcm9nZXR0byBUTFcvcHVzaC1ub3RpZmljYXRpb24tYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMyL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlRva2Vuc0xpc3QiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0b2tlbnM6IFtdLAogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBzZWFyY2g6IDAsCiAgICAgIGVycm9yOiBudWxsLAogICAgICBjb21wb25lbnRLZXk6IDAKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2NyZWF0ZWQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBhY2Nlc3NUb2tlbiwgX3lpZWxkJHRoaXMkJGh0dHAkZ2V0LCBkYXRhOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRhdXRoLmdldFRva2VuU2lsZW50bHkoKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBhY2Nlc3NUb2tlbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAuZ2V0KCJodHRwczovL3B1c2gtYXBpLmhlcm9rdWFwcC5jb20vdG9rZW5zIiwgewogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KGFjY2Vzc1Rva2VuKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF95aWVsZCR0aGlzJCRodHRwJGdldCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCR0aGlzJCRodHRwJGdldC5kYXRhOwogICAgICAgICAgICAgIHRoaXMudG9rZW5zID0gZGF0YVsicmVzcG9uc2UiXTsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMjsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDMpOwogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBfY29udGV4dC50MDsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0LnQwKTsgLy8gICB0aGlzLmFwaU1lc3NhZ2UgPSBgRXJyb3I6IHRoZSBzZXJ2ZXIgcmVzcG9uZGVkIHdpdGggJyR7ZS5yZXNwb25zZS5zdGF0dXN9OiAke2UucmVzcG9uc2Uuc3RhdHVzVGV4dH0nYDsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbMywgMTJdXSk7CiAgICB9KSk7CgogICAgZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgICAgcmV0dXJuIF9jcmVhdGVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgcmV0dXJuIGNyZWF0ZWQ7CiAgfSgpLAogIGNvbXB1dGVkOiB7CiAgICBmaWx0ZXJlZExpc3Q6IGZ1bmN0aW9uIGZpbHRlcmVkTGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiB0aGlzLnRva2Vucy5maWx0ZXIoZnVuY3Rpb24gKHRva2VuKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnNlYXJjaCA9PSAwID8gdHJ1ZSA6IHRva2VuLmlkID09IHBhcnNlSW50KF90aGlzLnNlYXJjaCk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZGVsZXRlVG9rZW46IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9kZWxldGVUb2tlbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoaWQpIHsKICAgICAgICB2YXIgYWNjZXNzVG9rZW4sIGtleTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFjb25maXJtKCJDYW5jZWxsYXJlIGlsIHRva2VuP1xuTm9uIHNhcsOgIHBvc3NpYmlsZSByZWN1cGVyYXJsbyBpbiBzZWd1aXRvIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGF1dGguZ2V0VG9rZW5TaWxlbnRseSgpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbiA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA0OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAuZGVsZXRlKCJodHRwczovL3B1c2gtYXBpLmhlcm9rdWFwcC5jb20vdG9rZW5zLyIgKyBpZCwgewogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdChhY2Nlc3NUb2tlbikKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA5OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDQpOwogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dDIudDApOyAvLyAgIHRoaXMuYXBpTWVzc2FnZSA9IGBFcnJvcjogdGhlIHNlcnZlciByZXNwb25kZWQgd2l0aCAnJHtlLnJlc3BvbnNlLnN0YXR1c306ICR7ZS5yZXNwb25zZS5zdGF0dXNUZXh0fSdgOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgZm9yIChrZXkgaW4gdGhpcy50b2tlbnMpIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9rZW5zW2tleV1bImlkIl0gPT09IGlkKSB7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudG9rZW5zW2tleV07CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JjZVJlcmVuZGVyKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCA9ICIgIjsKICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoID0gIiI7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMsIFtbNCwgOV1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZGVsZXRlVG9rZW4oX3gpIHsKICAgICAgICByZXR1cm4gX2RlbGV0ZVRva2VuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBkZWxldGVUb2tlbjsKICAgIH0oKSwKICAgIGZvcmNlUmVyZW5kZXI6IGZ1bmN0aW9uIGZvcmNlUmVyZW5kZXIoKSB7CiAgICAgIHRoaXMuY29tcG9uZW50S2V5ICs9IDE7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["TokensList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,IAFA;AAGA,MAAA,MAAA,EAAA,CAHA;AAIA,MAAA,KAAA,EAAA,IAJA;AAKA,MAAA,YAAA,EAAA;AALA,KAAA;AAOA,GAVA;AAWA,EAAA,OAXA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAYA,KAAA,KAAA,CAAA,gBAAA,EAZA;;AAAA;AAYA,cAAA,WAZA;AAAA;AAAA;AAAA,qBAcA,KAAA,KAAA,CAAA,GAAA,CACA,uCADA,EAEA;AACA,gBAAA,OAAA,EAAA;AACA,kBAAA,aAAA,mBAAA,WAAA;AADA;AADA,eAFA,CAdA;;AAAA;AAAA;AAcA,cAAA,IAdA,yBAcA,IAdA;AAsBA,mBAAA,MAAA,GAAA,IAAA,CAAA,UAAA,CAAA;AACA,mBAAA,OAAA,GAAA,KAAA;AAvBA;AAAA;;AAAA;AAAA;AAAA;AAyBA,mBAAA,OAAA,GAAA,KAAA;AACA,mBAAA,KAAA;AACA,cAAA,OAAA,CAAA,KAAA,cA3BA,CA4BA;;AA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA+BA,EAAA,QAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AACA,aAAA,KAAA,MAAA,CAAA,MAAA,CAAA,UAAA,KAAA,EAAA;AACA,eAAA,KAAA,CAAA,MAAA,IAAA,CAAA,GAAA,IAAA,GAAA,KAAA,CAAA,EAAA,IAAA,QAAA,CAAA,KAAA,CAAA,MAAA,CAAA;AACA,OAFA,CAAA;AAGA;AALA,GA/BA;AAsCA,EAAA,OAAA,EAAA;AACA,IAAA,WADA;AAAA,mGACA,EADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAGA,OAAA,CACA,iEADA,CAHA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAOA,KAAA,KAAA,CAAA,gBAAA,EAPA;;AAAA;AAOA,gBAAA,WAPA;AAAA;AAAA;AAAA,uBASA,KAAA,KAAA,CAAA,MAAA,CACA,2CAAA,EADA,EAEA;AACA,kBAAA,OAAA,EAAA;AACA,oBAAA,aAAA,mBAAA,WAAA;AADA;AADA,iBAFA,CATA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAkBA,gBAAA,OAAA,CAAA,KAAA,eAlBA,CAmBA;;AAnBA;AAqBA,qBAAA,GAAA,IAAA,KAAA,MAAA,EAAA;AACA,sBAAA,KAAA,MAAA,CAAA,GAAA,EAAA,IAAA,MAAA,EAAA,EAAA;AACA,2BAAA,KAAA,MAAA,CAAA,GAAA,CAAA;AACA,yBAAA,aAAA;AACA;AACA;;AACA,qBAAA,MAAA,GAAA,GAAA;AACA,qBAAA,MAAA,GAAA,EAAA;;AA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA+BA,IAAA,aA/BA,2BA+BA;AACA,WAAA,YAAA,IAAA,CAAA;AACA;AAjCA;AAtCA,CAAA","sourcesContent":["<template>\n  <div id=\"TokensList\" :key=\"componentKey\">\n    <input\n      type=\"search\"\n      v-model=\"search\"\n      class=\"form-control\"\n      placeholder=\"Id del cliente..\"\n    />\n    <div v-if=\"loading\" class=\"text-center pt-5\">\n      <h5>Caricamento lista token</h5>\n      <div class=\"spinner-grow text-secondary\" role=\"status\">\n        <span class=\"sr-only\">Loading...</span>\n      </div>\n    </div>\n    <div v-if=\"error\"></div>\n    <div class=\"card-group\">\n      <div\n        class=\"card border shadow rounded\"\n        v-for=\"token of filteredList\"\n        :key=\"token.id\"\n        style=\"min-width: 18rem; margin: 10px\"\n      >\n        <div class=\"card-body d-flex flex-column justify-content-between\">\n          <div class=\"d-flex justify-content-between\">\n            <h5 class=\"card-title\">{{ token.id }}</h5>\n            <font-awesome-icon\n              icon=\"times\"\n              @click=\"deleteToken(token.id)\"\n              class=\"text-danger pointer\"\n            >\n            </font-awesome-icon>\n          </div>\n\n          <p class=\"card-text\">\n            {{ token.token }}\n          </p>\n          <div class=\"d-flex justify-content-between\">\n            <div></div>\n            <router-link\n              :to=\"'/notification/direct/' + token.token\"\n              class=\"card-link btn btn-primary btn-sm\"\n              >Invia Notifica\n              <font-awesome-icon icon=\"chevron-right\" class=\"ml-1\">\n              </font-awesome-icon\n            ></router-link>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"TokensList\",\n  data() {\n    return {\n      tokens: [],\n      loading: true,\n      search: 0,\n      error: null,\n      componentKey: 0,\n    };\n  },\n  async created() {\n    const accessToken = await this.$auth.getTokenSilently();\n    try {\n      const { data } = await this.$http.get(\n        \"https://push-api.herokuapp.com/tokens\",\n        {\n          headers: {\n            Authorization: `Bearer ${accessToken}`,\n          },\n        }\n      );\n      this.tokens = data[\"response\"];\n      this.loading = false;\n    } catch (e) {\n      this.loading = false;\n      this.error = e;\n      console.error(e);\n      //   this.apiMessage = `Error: the server responded with '${e.response.status}: ${e.response.statusText}'`;\n    }\n  },\n  computed: {\n    filteredList() {\n      return this.tokens.filter((token) => {\n        return this.search == 0 ? true : token.id == parseInt(this.search);\n      });\n    },\n  },\n  methods: {\n    async deleteToken(id) {\n      if (\n        confirm(\n          \"Cancellare il token?\\nNon sarà possibile recuperarlo in seguito\"\n        )\n      ) {\n        const accessToken = await this.$auth.getTokenSilently();\n        try {\n          await this.$http.delete(\n            \"https://push-api.herokuapp.com/tokens/\" + id,\n            {\n              headers: {\n                Authorization: `Bearer ${accessToken}`,\n              },\n            }\n          );\n        } catch (e) {\n          console.error(e);\n          //   this.apiMessage = `Error: the server responded with '${e.response.status}: ${e.response.statusText}'`;\n        }\n        for (var key in this.tokens) {\n          if (this.tokens[key][\"id\"] === id) {\n            delete this.tokens[key];\n            this.forceRerender();\n          }\n        }\n        this.search = \" \";\n        this.search = \"\";\n      }\n    },\n    forceRerender() {\n      this.componentKey += 1;\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/components"}]}