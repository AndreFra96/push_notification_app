{"remainingRequest":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/thread-loader/dist/cjs.js!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/babel-loader/lib/index.js!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/src/components/TokensList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/src/components/TokensList.vue","mtime":1626255692978},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5zZWFyY2giOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvYW5kcmVhYnJpb3NjaGkvRGVza3RvcC9wcm9nZXR0byBUTFcvcHVzaC1ub3RpZmljYXRpb24tYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMyL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlRva2Vuc0xpc3QiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0b2tlbnM6IFtdLAogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBzZWFyY2g6ICIiLAogICAgICBlcnJvcjogbnVsbCwKICAgICAgY29tcG9uZW50S2V5OiAwCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gKCkgewogICAgdmFyIF9jcmVhdGVkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgYWNjZXNzVG9rZW4sIF95aWVsZCR0aGlzJCRodHRwJGdldCwgZGF0YTsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kYXV0aC5nZXRUb2tlblNpbGVudGx5KCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRodHRwLmdldCgiaHR0cHM6Ly9wdXNoLWFwaS5oZXJva3VhcHAuY29tL3Rva2VucyIsIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdChhY2Nlc3NUb2tlbikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfeWllbGQkdGhpcyQkaHR0cCRnZXQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkdGhpcyQkaHR0cCRnZXQuZGF0YTsKICAgICAgICAgICAgICB0aGlzLnRva2VucyA9IGRhdGFbInJlc3BvbnNlIl07CiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLmVycm9yID0gX2NvbnRleHQudDA7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dC50MCk7IC8vICAgdGhpcy5hcGlNZXNzYWdlID0gYEVycm9yOiB0aGUgc2VydmVyIHJlc3BvbmRlZCB3aXRoICcke2UucmVzcG9uc2Uuc3RhdHVzfTogJHtlLnJlc3BvbnNlLnN0YXR1c1RleHR9J2A7CgogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzMsIDEyXV0pOwogICAgfSkpOwoKICAgIGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAgIHJldHVybiBfY3JlYXRlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIHJldHVybiBjcmVhdGVkOwogIH0oKSwKICBjb21wdXRlZDogewogICAgZmlsdGVyZWRMaXN0OiBmdW5jdGlvbiBmaWx0ZXJlZExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gdGhpcy50b2tlbnMuZmlsdGVyKGZ1bmN0aW9uICh0b2tlbikgewogICAgICAgIHJldHVybiB0b2tlbi5pZCA9PSBwYXJzZUludChfdGhpcy5zZWFyY2gpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGRlbGV0ZVRva2VuOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZGVsZXRlVG9rZW4gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGlkKSB7CiAgICAgICAgdmFyIGFjY2Vzc1Rva2VuLCBrZXk7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghY29uZmlybSgiQ2FuY2VsbGFyZSBpbCB0b2tlbj9cbk5vbiBzYXLDoCBwb3NzaWJpbGUgcmVjdXBlcmFybG8gaW4gc2VndWl0byIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRhdXRoLmdldFRva2VuU2lsZW50bHkoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRodHRwLmRlbGV0ZSgiaHR0cHM6Ly9wdXNoLWFwaS5oZXJva3VhcHAuY29tL3Rva2Vucy8iICsgaWQsIHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQoYWNjZXNzVG9rZW4pCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSg0KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQyLnQwKTsgLy8gICB0aGlzLmFwaU1lc3NhZ2UgPSBgRXJyb3I6IHRoZSBzZXJ2ZXIgcmVzcG9uZGVkIHdpdGggJyR7ZS5yZXNwb25zZS5zdGF0dXN9OiAke2UucmVzcG9uc2Uuc3RhdHVzVGV4dH0nYDsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIHRoaXMudG9rZW5zKSB7CiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRva2Vuc1trZXldWyJpZCJdID09PSBpZCkgewogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRva2Vuc1trZXldOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9yY2VSZXJlbmRlcigpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5zZWFyY2ggPSAiICI7CiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCA9ICIiOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzLCBbWzQsIDldXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGRlbGV0ZVRva2VuKF94KSB7CiAgICAgICAgcmV0dXJuIF9kZWxldGVUb2tlbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZGVsZXRlVG9rZW47CiAgICB9KCksCiAgICBmb3JjZVJlcmVuZGVyOiBmdW5jdGlvbiBmb3JjZVJlcmVuZGVyKCkgewogICAgICB0aGlzLmNvbXBvbmVudEtleSArPSAxOwogICAgfQogIH0KfTs="},{"version":3,"sources":["TokensList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,IAFA;AAGA,MAAA,MAAA,EAAA,EAHA;AAIA,MAAA,KAAA,EAAA,IAJA;AAKA,MAAA,YAAA,EAAA;AALA,KAAA;AAOA,GAVA;AAWA,EAAA,OAXA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAYA,KAAA,KAAA,CAAA,gBAAA,EAZA;;AAAA;AAYA,cAAA,WAZA;AAAA;AAAA;AAAA,qBAcA,KAAA,KAAA,CAAA,GAAA,CACA,uCADA,EAEA;AACA,gBAAA,OAAA,EAAA;AACA,kBAAA,aAAA,mBAAA,WAAA;AADA;AADA,eAFA,CAdA;;AAAA;AAAA;AAcA,cAAA,IAdA,yBAcA,IAdA;AAsBA,mBAAA,MAAA,GAAA,IAAA,CAAA,UAAA,CAAA;AACA,mBAAA,OAAA,GAAA,KAAA;AAvBA;AAAA;;AAAA;AAAA;AAAA;AAyBA,mBAAA,OAAA,GAAA,KAAA;AACA,mBAAA,KAAA;AACA,cAAA,OAAA,CAAA,KAAA,cA3BA,CA4BA;;AA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA+BA,EAAA,QAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AACA,aAAA,KAAA,MAAA,CAAA,MAAA,CAAA,UAAA,KAAA,EAAA;AACA,eAAA,KAAA,CAAA,EAAA,IAAA,QAAA,CAAA,KAAA,CAAA,MAAA,CAAA;AACA,OAFA,CAAA;AAGA;AALA,GA/BA;AAsCA,EAAA,OAAA,EAAA;AACA,IAAA,WADA;AAAA,mGACA,EADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAGA,OAAA,CACA,iEADA,CAHA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAOA,KAAA,KAAA,CAAA,gBAAA,EAPA;;AAAA;AAOA,gBAAA,WAPA;AAAA;AAAA;AAAA,uBASA,KAAA,KAAA,CAAA,MAAA,CACA,2CAAA,EADA,EAEA;AACA,kBAAA,OAAA,EAAA;AACA,oBAAA,aAAA,mBAAA,WAAA;AADA;AADA,iBAFA,CATA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAkBA,gBAAA,OAAA,CAAA,KAAA,eAlBA,CAmBA;;AAnBA;AAqBA,qBAAA,GAAA,IAAA,KAAA,MAAA,EAAA;AACA,sBAAA,KAAA,MAAA,CAAA,GAAA,EAAA,IAAA,MAAA,EAAA,EAAA;AACA,2BAAA,KAAA,MAAA,CAAA,GAAA,CAAA;AACA,yBAAA,aAAA;AACA;AACA;;AACA,qBAAA,MAAA,GAAA,GAAA;AACA,qBAAA,MAAA,GAAA,EAAA;;AA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA+BA,IAAA,aA/BA,2BA+BA;AACA,WAAA,YAAA,IAAA,CAAA;AACA;AAjCA;AAtCA,CAAA","sourcesContent":["<template>\n  <div id=\"TokensList\" :key=\"componentKey\">\n    <input\n      type=\"search\"\n      v-model=\"search\"\n      class=\"form-control\"\n      placeholder=\"Id del cliente..\"\n    />\n    <div v-if=\"loading\" class=\"text-center pt-5\">\n      <h5>Caricamento lista token</h5>\n      <div class=\"spinner-grow text-secondary\" role=\"status\">\n        <span class=\"sr-only\">Loading...</span>\n      </div>\n    </div>\n    <div v-if=\"error\"></div>\n    <div class=\"card-group\">\n      <div\n        class=\"card border shadow rounded\"\n        v-for=\"token of filteredList\"\n        :key=\"token.id\"\n        style=\"min-width: 18rem; margin: 10px\"\n      >\n        <div class=\"card-body d-flex flex-column justify-content-between\">\n          <div class=\"d-flex justify-content-between\">\n            <h5 class=\"card-title\">{{ token.id }}</h5>\n            <font-awesome-icon\n              icon=\"times\"\n              @click=\"deleteToken(token.id)\"\n              class=\"text-danger pointer\"\n            >\n            </font-awesome-icon>\n          </div>\n\n          <p class=\"card-text\">\n            {{ token.token }}\n          </p>\n          <div class=\"d-flex justify-content-between\">\n            <router-link :to=\"'/tokens/edit/' + token.id\" class=\"card-link\"\n              >Modifica</router-link\n            >\n            <router-link\n              :to=\"'/notification/direct/' + token.id\"\n              class=\"card-link btn btn-primary btn-sm\"\n              >Invia Notifica\n              <font-awesome-icon icon=\"chevron-right\" class=\"ml-1\">\n              </font-awesome-icon\n            ></router-link>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"TokensList\",\n  data() {\n    return {\n      tokens: [],\n      loading: true,\n      search: \"\",\n      error: null,\n      componentKey: 0,\n    };\n  },\n  async created() {\n    const accessToken = await this.$auth.getTokenSilently();\n    try {\n      const { data } = await this.$http.get(\n        \"https://push-api.herokuapp.com/tokens\",\n        {\n          headers: {\n            Authorization: `Bearer ${accessToken}`,\n          },\n        }\n      );\n      this.tokens = data[\"response\"];\n      this.loading = false;\n    } catch (e) {\n      this.loading = false;\n      this.error = e;\n      console.error(e);\n      //   this.apiMessage = `Error: the server responded with '${e.response.status}: ${e.response.statusText}'`;\n    }\n  },\n  computed: {\n    filteredList() {\n      return this.tokens.filter((token) => {\n        return token.id == parseInt(this.search);\n      });\n    },\n  },\n  methods: {\n    async deleteToken(id) {\n      if (\n        confirm(\n          \"Cancellare il token?\\nNon sarà possibile recuperarlo in seguito\"\n        )\n      ) {\n        const accessToken = await this.$auth.getTokenSilently();\n        try {\n          await this.$http.delete(\n            \"https://push-api.herokuapp.com/tokens/\" + id,\n            {\n              headers: {\n                Authorization: `Bearer ${accessToken}`,\n              },\n            }\n          );\n        } catch (e) {\n          console.error(e);\n          //   this.apiMessage = `Error: the server responded with '${e.response.status}: ${e.response.statusText}'`;\n        }\n        for (var key in this.tokens) {\n          if (this.tokens[key][\"id\"] === id) {\n            delete this.tokens[key];\n            this.forceRerender();\n          }\n        }\n        this.search = \" \";\n        this.search = \"\";\n      }\n    },\n    forceRerender() {\n      this.componentKey += 1;\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/components"}]}