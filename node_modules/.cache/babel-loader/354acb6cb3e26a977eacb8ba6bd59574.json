{"remainingRequest":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/babel-loader/lib/index.js!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/src/components/GroupNotificationForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/src/components/GroupNotificationForm.vue","mtime":1624203582445},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2FuZHJlYWJyaW9zY2hpL0Rlc2t0b3AvcHJvZ2V0dG8gVExXL3B1c2gtbm90aWZpY2F0aW9uLWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMi9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IERpc21pc3NhYmxlQWxlcnQgZnJvbSAiLi4vY29tcG9uZW50cy9EaXNtaXNzYWJsZUFsZXJ0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJHcm91c05vdGlmaWNhdGlvbkZyb20iLAogIGNvbXBvbmVudHM6IHsKICAgIERpc21pc3NhYmxlQWxlcnQ6IERpc21pc3NhYmxlQWxlcnQKICB9LAogIHByb3BzOiBbImdyb3VwSWQiXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaWQ6IHRoaXMuZ3JvdXBJZCwKICAgICAgdGl0bGU6ICIiLAogICAgICBib2R5OiAiIiwKICAgICAgYWxlcnQ6IHsKICAgICAgICBtZXNzYWdlOiAiIiwKICAgICAgICBzdGF0dXM6ICJkLW5vbmUiLAogICAgICAgIHN1Y2Nlc3M6IHRydWUKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNlbmROb3RpZmljYXRpb246IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zZW5kTm90aWZpY2F0aW9uID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBhY2Nlc3NUb2tlbiwgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kYXV0aC5nZXRUb2tlblNpbGVudGx5KCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kaHR0cC5wb3N0KCJodHRwczovL3B1c2gtYXBpLmhlcm9rdWFwcC5jb20vbWVzc2FnZXMvZ3JvdXAiLCB7CiAgICAgICAgICAgICAgICAgIGdyb3VwOiB0aGlzLmlkLAogICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICAgICAgICAgICAgYm9keTogdGhpcy5ib2R5CiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KGFjY2Vzc1Rva2VuKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgdGhpcy5zaG93UmVzcG9uc2VBbGVydCgiT3BlcmF6aW9uZSBjb21wbGV0YXRhLCBub3RpZmljaGUgaW52aWF0ZSBjb24gc3VjY2Vzc286ICIgKyByZXNwb25zZS5kYXRhLnJlc3BvbnNlLmxlbmd0aCk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dSZXNwb25zZUFsZXJ0KCJFcnJvcmU6IGlsIHNlcnZlciBoYSByaXNwb3N0byBjb24gJyIuY29uY2F0KF9jb250ZXh0LnQwLnJlc3BvbnNlLnN0YXR1cywgIjogIikuY29uY2F0KF9jb250ZXh0LnQwLnJlc3BvbnNlLnN0YXR1c1RleHQsICInIiksIGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbMywgMTBdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHNlbmROb3RpZmljYXRpb24oKSB7CiAgICAgICAgcmV0dXJuIF9zZW5kTm90aWZpY2F0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzZW5kTm90aWZpY2F0aW9uOwogICAgfSgpLAogICAgc2hvd1Jlc3BvbnNlQWxlcnQ6IGZ1bmN0aW9uIHNob3dSZXNwb25zZUFsZXJ0KG1lc3NhZ2UpIHsKICAgICAgdmFyIHN1Y2Nlc3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CiAgICAgIHRoaXMuYWxlcnQubWVzc2FnZSA9IG1lc3NhZ2U7CiAgICAgIHRoaXMuYWxlcnQuc3RhdHVzID0gImQtYmxvY2siOwogICAgICB0aGlzLmFsZXJ0LnN1Y2Nlc3MgPSBzdWNjZXNzOwogICAgfQogIH0KfTs="},{"version":3,"sources":["GroupNotificationForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA,OAAA,gBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,uBADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,gBAAA,EAAA;AADA,GAFA;AAKA,EAAA,KAAA,EAAA,CAAA,SAAA,CALA;AAMA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,EAAA,EAAA,KAAA,OADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA,EAHA;AAIA,MAAA,KAAA,EAAA;AACA,QAAA,OAAA,EAAA,EADA;AAEA,QAAA,MAAA,EAAA,QAFA;AAGA,QAAA,OAAA,EAAA;AAHA;AAJA,KAAA;AAUA,GAjBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,KAAA,KAAA,CAAA,gBAAA,EAFA;;AAAA;AAEA,gBAAA,WAFA;AAAA;AAAA;AAAA,uBAIA,KAAA,KAAA,CAAA,IAAA,CACA,+CADA,EAEA;AACA,kBAAA,KAAA,EAAA,KAAA,EADA;AAEA,kBAAA,KAAA,EAAA,KAAA,KAFA;AAGA,kBAAA,IAAA,EAAA,KAAA;AAHA,iBAFA,EAOA;AACA,kBAAA,OAAA,EAAA;AACA,oBAAA,aAAA,mBAAA,WAAA;AADA;AADA,iBAPA,CAJA;;AAAA;AAIA,gBAAA,QAJA;AAkBA,qBAAA,iBAAA,CACA,4DACA,QAAA,CAAA,IAAA,CAAA,QAAA,CAAA,MAFA;AAlBA;AAAA;;AAAA;AAAA;AAAA;AAuBA,qBAAA,iBAAA,8CACA,YAAA,QAAA,CAAA,MADA,eACA,YAAA,QAAA,CAAA,UADA,QAEA,KAFA;;AAvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA6BA,IAAA,iBA7BA,6BA6BA,OA7BA,EA6BA;AAAA,UAAA,OAAA,uEAAA,IAAA;AACA,WAAA,KAAA,CAAA,OAAA,GAAA,OAAA;AACA,WAAA,KAAA,CAAA,MAAA,GAAA,SAAA;AACA,WAAA,KAAA,CAAA,OAAA,GAAA,OAAA;AACA;AAjCA;AAlBA,CAAA","sourcesContent":["<template>\n  <div>\n    <DismissableAlert\n      :message=\"alert.message\"\n      :status=\"alert.status\"\n      :success=\"alert.success\"\n    ></DismissableAlert>\n    <form id=\"GroupNotificationForm\">\n      <div class=\"form-group\">\n        <label for=\"message-title\">Titolo</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          id=\"message-title\"\n          aria-describedby=\"title-hint\"\n          placeholder=\"Titolo della notifica\"\n          v-model=\"title\"\n        />\n        <small id=\"title-hint\" class=\"form-text text-muted\"\n          >E' possibile utilizzare le keywords sia nel titolo che nel corpo\n          della notifica.</small\n        >\n      </div>\n      <div class=\"form-group\">\n        <label for=\"message-body\">Corpo</label>\n        <textarea\n          type=\"text\"\n          class=\"form-control\"\n          id=\"message-body\"\n          placeholder=\"Corpo della notifica\"\n          v-model=\"body\"\n        >\n        </textarea>\n      </div>\n      <button\n        type=\"button\"\n        @click=\"sendNotification\"\n        class=\"btn btn-primary rounded\"\n      >\n        Invia Notifica\n      </button>\n    </form>\n  </div>\n</template>\n<script>\nimport DismissableAlert from \"../components/DismissableAlert\";\n\nexport default {\n  name: \"GrousNotificationFrom\",\n  components: {\n    DismissableAlert,\n  },\n  props: [\"groupId\"],\n  data: function () {\n    return {\n      id: this.groupId,\n      title: \"\",\n      body: \"\",\n      alert: {\n        message: \"\",\n        status: \"d-none\",\n        success: true,\n      },\n    };\n  },\n  methods: {\n    async sendNotification() {\n      const accessToken = await this.$auth.getTokenSilently();\n      try {\n        let response = await this.$http.post(\n          \"https://push-api.herokuapp.com/messages/group\",\n          {\n            group: this.id,\n            title: this.title,\n            body: this.body,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${accessToken}`,\n            },\n          }\n        );\n\n        this.showResponseAlert(\n          \"Operazione completata, notifiche inviate con successo: \" +\n            response.data.response.length\n        );\n      } catch (e) {\n        this.showResponseAlert(\n          `Errore: il server ha risposto con '${e.response.status}: ${e.response.statusText}'`,\n          false\n        );\n      }\n    },\n    showResponseAlert(message, success = true) {\n      this.alert.message = message;\n      this.alert.status = \"d-block\";\n      this.alert.success = success;\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/components"}]}