{"remainingRequest":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/thread-loader/dist/cjs.js!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/babel-loader/lib/index.js!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/src/components/GroupNotificationForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/src/components/GroupNotificationForm.vue","mtime":1624203742220},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreabrioschi/Desktop/progetto TLW/push-notification-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9hbmRyZWFicmlvc2NoaS9EZXNrdG9wL3Byb2dldHRvIFRMVy9wdXNoLW5vdGlmaWNhdGlvbi1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lLWNvcmVqczIvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBEaXNtaXNzYWJsZUFsZXJ0IGZyb20gIi4uL2NvbXBvbmVudHMvRGlzbWlzc2FibGVBbGVydCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiR3JvdXNOb3RpZmljYXRpb25Gcm9tIiwKICBjb21wb25lbnRzOiB7CiAgICBEaXNtaXNzYWJsZUFsZXJ0OiBEaXNtaXNzYWJsZUFsZXJ0CiAgfSwKICBwcm9wczogWyJncm91cElkIl0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlkOiB0aGlzLmdyb3VwSWQsCiAgICAgIHRpdGxlOiAiIiwKICAgICAgYm9keTogIiIsCiAgICAgIGFsZXJ0OiB7CiAgICAgICAgbWVzc2FnZTogIiIsCiAgICAgICAgc3RhdHVzOiAiZC1ub25lIiwKICAgICAgICBzdWNjZXNzOiB0cnVlCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZW5kTm90aWZpY2F0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2VuZE5vdGlmaWNhdGlvbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgYWNjZXNzVG9rZW4sIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGF1dGguZ2V0VG9rZW5TaWxlbnRseSgpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAucG9zdCgiaHR0cHM6Ly9wdXNoLWFwaS5oZXJva3VhcHAuY29tL21lc3NhZ2VzL2dyb3VwIiwgewogICAgICAgICAgICAgICAgICBncm91cDogdGhpcy5pZCwKICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsCiAgICAgICAgICAgICAgICAgIGJvZHk6IHRoaXMuYm9keQogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdChhY2Nlc3NUb2tlbikKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd1Jlc3BvbnNlQWxlcnQoIk9wZXJhemlvbmUgY29tcGxldGF0YSwgIi5jb25jYXQoT2JqZWN0LmtleXMocmVzcG9uc2UuZGF0YS5yZXNwb25zZSkubGVuZ3RoLCAiIG5vdGlmaWNoZSBpbnZpYXRlIGNvbiBzdWNjZXNzby4iKSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dSZXNwb25zZUFsZXJ0KCJFcnJvcmU6IGlsIHNlcnZlciBoYSByaXNwb3N0byBjb24gJyIuY29uY2F0KF9jb250ZXh0LnQwLnJlc3BvbnNlLnN0YXR1cywgIjogIikuY29uY2F0KF9jb250ZXh0LnQwLnJlc3BvbnNlLnN0YXR1c1RleHQsICInIiksIGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbMywgMTBdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHNlbmROb3RpZmljYXRpb24oKSB7CiAgICAgICAgcmV0dXJuIF9zZW5kTm90aWZpY2F0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzZW5kTm90aWZpY2F0aW9uOwogICAgfSgpLAogICAgc2hvd1Jlc3BvbnNlQWxlcnQ6IGZ1bmN0aW9uIHNob3dSZXNwb25zZUFsZXJ0KG1lc3NhZ2UpIHsKICAgICAgdmFyIHN1Y2Nlc3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CiAgICAgIHRoaXMuYWxlcnQubWVzc2FnZSA9IG1lc3NhZ2U7CiAgICAgIHRoaXMuYWxlcnQuc3RhdHVzID0gImQtYmxvY2siOwogICAgICB0aGlzLmFsZXJ0LnN1Y2Nlc3MgPSBzdWNjZXNzOwogICAgfQogIH0KfTs="},{"version":3,"sources":["GroupNotificationForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA,OAAA,gBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,uBADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,gBAAA,EAAA;AADA,GAFA;AAKA,EAAA,KAAA,EAAA,CAAA,SAAA,CALA;AAMA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,EAAA,EAAA,KAAA,OADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA,EAHA;AAIA,MAAA,KAAA,EAAA;AACA,QAAA,OAAA,EAAA,EADA;AAEA,QAAA,MAAA,EAAA,QAFA;AAGA,QAAA,OAAA,EAAA;AAHA;AAJA,KAAA;AAUA,GAjBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,KAAA,KAAA,CAAA,gBAAA,EAFA;;AAAA;AAEA,gBAAA,WAFA;AAAA;AAAA;AAAA,uBAIA,KAAA,KAAA,CAAA,IAAA,CACA,+CADA,EAEA;AACA,kBAAA,KAAA,EAAA,KAAA,EADA;AAEA,kBAAA,KAAA,EAAA,KAAA,KAFA;AAGA,kBAAA,IAAA,EAAA,KAAA;AAHA,iBAFA,EAOA;AACA,kBAAA,OAAA,EAAA;AACA,oBAAA,aAAA,mBAAA,WAAA;AADA;AADA,iBAPA,CAJA;;AAAA;AAIA,gBAAA,QAJA;AAkBA,qBAAA,iBAAA,kCAEA,MAAA,CAAA,IAAA,CAAA,QAAA,CAAA,IAAA,CAAA,QAAA,EAAA,MAFA;AAlBA;AAAA;;AAAA;AAAA;AAAA;AAwBA,qBAAA,iBAAA,8CACA,YAAA,QAAA,CAAA,MADA,eACA,YAAA,QAAA,CAAA,UADA,QAEA,KAFA;;AAxBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA8BA,IAAA,iBA9BA,6BA8BA,OA9BA,EA8BA;AAAA,UAAA,OAAA,uEAAA,IAAA;AACA,WAAA,KAAA,CAAA,OAAA,GAAA,OAAA;AACA,WAAA,KAAA,CAAA,MAAA,GAAA,SAAA;AACA,WAAA,KAAA,CAAA,OAAA,GAAA,OAAA;AACA;AAlCA;AAlBA,CAAA","sourcesContent":["<template>\n  <div>\n    <DismissableAlert\n      :message=\"alert.message\"\n      :status=\"alert.status\"\n      :success=\"alert.success\"\n    ></DismissableAlert>\n    <form id=\"GroupNotificationForm\">\n      <div class=\"form-group\">\n        <label for=\"message-title\">Titolo</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          id=\"message-title\"\n          aria-describedby=\"title-hint\"\n          placeholder=\"Titolo della notifica\"\n          v-model=\"title\"\n        />\n        <small id=\"title-hint\" class=\"form-text text-muted\"\n          >E' possibile utilizzare le keywords sia nel titolo che nel corpo\n          della notifica.</small\n        >\n      </div>\n      <div class=\"form-group\">\n        <label for=\"message-body\">Corpo</label>\n        <textarea\n          type=\"text\"\n          class=\"form-control\"\n          id=\"message-body\"\n          placeholder=\"Corpo della notifica\"\n          v-model=\"body\"\n        >\n        </textarea>\n      </div>\n      <button\n        type=\"button\"\n        @click=\"sendNotification\"\n        class=\"btn btn-primary rounded\"\n      >\n        Invia Notifica\n      </button>\n    </form>\n  </div>\n</template>\n<script>\nimport DismissableAlert from \"../components/DismissableAlert\";\n\nexport default {\n  name: \"GrousNotificationFrom\",\n  components: {\n    DismissableAlert,\n  },\n  props: [\"groupId\"],\n  data: function () {\n    return {\n      id: this.groupId,\n      title: \"\",\n      body: \"\",\n      alert: {\n        message: \"\",\n        status: \"d-none\",\n        success: true,\n      },\n    };\n  },\n  methods: {\n    async sendNotification() {\n      const accessToken = await this.$auth.getTokenSilently();\n      try {\n        let response = await this.$http.post(\n          \"https://push-api.herokuapp.com/messages/group\",\n          {\n            group: this.id,\n            title: this.title,\n            body: this.body,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${accessToken}`,\n            },\n          }\n        );\n\n        this.showResponseAlert(\n          `Operazione completata, ${\n            Object.keys(response.data.response).length\n          } notifiche inviate con successo.`\n        );\n      } catch (e) {\n        this.showResponseAlert(\n          `Errore: il server ha risposto con '${e.response.status}: ${e.response.statusText}'`,\n          false\n        );\n      }\n    },\n    showResponseAlert(message, success = true) {\n      this.alert.message = message;\n      this.alert.status = \"d-block\";\n      this.alert.success = success;\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/components"}]}